/* ===== VARIÁVEIS DE COR E FONTES ===== */
:root {
  --background-color: #FFFFFF;     /* fundo geral */
  --panel-background: #FFFFFF;     /* painel lateral */
  --text-color-primary: #5C5C5C;
  --text-color-secondary: #AEAEAE; /* Cor cinza para a lanterna */
  --border-color: gold;            /* bordas douradas */
  --brand-color: #6A5A4D;           /* botões e logo marrom */
  --hover-color-beige: #aa8b69;    /* NOVA COR: Bege para o hover do menu */
  --font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
}

/* ===== RESET E ESTILOS GLOBAIS ===== */
* {
  box-sizing: border-box;
}

body, html {
  margin: 0;
  padding: 0;
  height: 100vh;
  width: 100vw;
  font-family: var(--font-family);
  background-color: var(--background-color);
  overflow: hidden;
  color: var(--text-color-primary);
}

/* ===== ÍCONES DO GOOGLE FONTS ===== */
.material-symbols-outlined {
  color: #964B00;
  font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
  font-size: 22px;
}

/* ===== HEADER / NAVBAR ===== */
.header {
  display: flex;
  /* justify-content foi removido para permitir o alinhamento customizado */
  align-items: center;
  gap: 24px; /* Espaçamento entre logo, menu e a parte da direita */
  padding: 0 24px;
  height: 60px;
  width: 100%;
  border-bottom: 0.5px solid var(--border-color);
  background-color: var(--background-color);
}

.logo-container {
  /* Mantém a logo sem encolher */
  flex-shrink: 0; 
}

.logo-icon {
  color: #964B00;
}

.nav-menu {
  display: flex;
  gap: 40px; /* AUMENTADO: Espaçamento entre as palavras do menu */
  margin-right: auto; /* MÁGICA: Empurra todo o resto para a direita */
}

.nav-menu a, .nav-menu button {
  text-decoration: none;
  color: #964B00;
  font-size: 14px;
  font-weight: 500;
  transition: color 0.2s ease;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  font-family: var(--font-family);
}

.nav-menu a:hover, .nav-menu button:hover {
  color: var(--hover-color-beige); /* ALTERADO: Cor do hover para bege */
}

.nav-right {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-shrink: 0; /* Impede que os ícones da direita encolham */
}

.news-container {
  display: none; /* inicial escondido */
  position: fixed; /* fixa em relação à janela */
  top: 80px;      /* distância do topo */
  left: 20px;    /* distância da direita */
  width: 270px;   /* largura do container */
  max-height: 70vh; /* altura máxima relativa à tela */
  overflow-y: auto; /* rolagem se ultrapassar altura */
  background-color: #fff;
  border: 2px solid #C8A97E;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  padding: 15px;
  z-index: 10000; /* garante que fique acima de outros elementos */
}

.news-container a {
  display: block;
  margin-bottom: 10px;
  text-decoration: none;
  color: #333;
}

.news-container a:hover {
  text-decoration: underline;
  color: #8B5E3C;
}

.close-news {
  position: absolute;
  top: 5px;
  right: 8px;
  background: none;
  border: none;
  font-size: 18px;
  cursor: pointer;
  color: #C8A97E;
}

/* Atualização para forçar a visualização */
.weather-box {
    position: absolute !important; /* Flutua sobre o mapa */
    top: 10px;                     /* Distância do topo */
    right: 70px;                   /* Distância da direita (ao lado dos outros botões) */
    z-index: 99999 !important;     /* Garante que fique acima de tudo */
    
    background-color: #ffffff;
    color: #333;
    padding: 10px 15px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    min-width: 180px; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    font-size: 13px;
    line-height: 1.4;
    
    /* Animação suave */
    transition: opacity 0.3s ease;
}

.search-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid var(--border-color); /* borda dourada */
  border-radius: 6px;
  padding: 6px 12px;
  background-color: var(--background-color); /* fundo branco */
}

.search-bar .material-symbols-outlined {
  color: #964B00;
}

.search-bar input {
  border: none;
  outline: none;
  background: transparent;
  font-size: 14px;
  width: 150px;
}

.search-bar input::placeholder {
  color: var(--text-color-secondary);
}

.user-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

.action-icon {
  color: var(--brand-color); /* ícones marrom */
  text-decoration: none;
  display: flex;
  align-items: center;
  justify-content: center;
}
.action-icon:hover {
  color: gold; /* hover dourado */
}

/* ===== CONTEÚDO PRINCIPAL ===== */
.main-content {
  display: flex;
  height: calc(100vh - 60px);
}

#map-container {
  flex-grow: 1;
  position: relative;
}

#map {
  width: 100%;
  height: 100%;
}

.map-controls button {
  border: none;
  background-color: var(--brand-color); /* botão marrom */
  padding: 5px 16px;
  font-size: 13px;
  font-weight: 500;
  color: white;
  cursor: pointer;
  border-radius: 4px;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.map-controls button.active {
  background-color: gold; /* botão ativo dourado */
  color: var(--brand-color); /* texto marrom */
}

/* ===== PAINEL LATERAL DIREITO ===== */
.info-panel {
  width: 450px;
  flex-shrink: 0;
  border-left: 1px solid var(--border-color); /* borda dourada */
  background-color: var(--panel-background); /* fundo branco */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.empty-state {
  text-align: center;
  color: var(--text-color-secondary);
}

.empty-state .empty-state-icon {
  font-size: 64px; /* AUMENTADO: Tamanho do ícone da lanterna */
  color: var(--text-color-secondary); /* ALTERADO: Cor para cinza */
  margin-bottom: 12px;
}

.empty-state p {
  margin: 0;
  font-size: 15px;
}

/* ===== FILTRO DROPDOWN (VERTICAL) ===== */
.filter-dropdown {
  position: absolute;
  top: 61px; /* Altura do header (60px) + 1px borda */
  left: 350px; /* Ajuste para alinhar com o link "Filtros" visualmente */
  width: 300px;
  max-height: 80vh; /* Não ultrapassa a altura da tela */
  background-color: var(--background-color);
  border: 1px solid var(--border-color); /* Borda Dourada */
  border-top: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  z-index: 3000; /* Acima do mapa */
  display: flex;
  flex-direction: column;
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* Classe utilitária para esconder/mostrar */
.hidden {
  display: none !important;
}

/* Cabeçalho do Dropdown */
.dropdown-header {
  padding: 12px 16px;
  background-color: #fafafa;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.dropdown-header h4 {
  margin: 0;
  color: #964B00;
  font-size: 15px;
  font-weight: 600;
}

/* Conteúdo com Scroll */
.dropdown-content {
  flex-grow: 1;
  overflow-y: auto;
  padding: 10px 16px;
}

.dropdown-footer {
  padding: 12px 16px;
  border-top: 1px solid #eee;
  background-color: #fafafa;
}

/* Ajustes na Árvore de Checkboxes (mais compacto) */
ul.tree-list { padding-left: 0; }
ul.tree-list ul { padding-left: 15px; border-left: 1px solid #ddd; margin-left: 5px; }
.item-filtro { margin-bottom: 5px; }

.label-distrito { font-size: 14px; color: #964B00; font-weight: bold; }
.label-bairro { font-size: 13px; color: #444; font-weight: 600; }
.label-sub { font-size: 12px; color: #666; }

/* Botão de Fechar pequeno */
.close-btn {
  font-size: 20px;
  background: none;
  border: none;
  cursor: pointer;
  color: #999;
}
.close-btn:hover { color: red; }

/* ===== MARCADOR TIPO PIN (SUB-BAIRROS) ===== */
.pin-sub {
  cursor: pointer;
  background: none;
  border: none;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Estilizando o ícone de localização */
.pin-sub .material-symbols-outlined {
  font-size: 36px; /* Tamanho bom para ser visível */
  color: #964B00;  /* Cor da marca (Marrom) */
  
  /* Sombra no texto para destacar do mapa (contorno branco e sombra preta) */
  text-shadow: 
    0 0 2px #fff,
    0 2px 5px rgba(0,0,0,0.4);
    
  transition: transform 0.2s, color 0.2s;
}

/* Efeito ao passar o mouse */
.pin-sub:hover .material-symbols-outlined {
  color: gold; /* Fica dourado */
  transform: scale(1.2) translateY(-5px); /* Cresce e "pula" um pouco */
  z-index: 999;
}

/* Ajuste do Popup para não ficar em cima do pino */
.maplibregl-popup {
  margin-bottom: 20px; /* Sobe um pouco a caixa de texto */
}

.header .logo-image {
    width: 45px;
}

/* ... Mantenha seu CSS geral (Header, Layout, etc) ... */

/* EFEITOS DO MAPA */

/* 1. Animação de entrada do Pino (Cai do céu e quica) */
@keyframes dropIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -200%) scale(0);
  }
  60% {
    opacity: 1;
    transform: translate(-50%, -100%) scale(1.1);
  }
  100% {
    transform: translate(-50%, -100%) scale(1);
  }
}

.pin-sub {
  position: absolute; /* Necessário para o posicionamento do Google */
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 40px;
  height: 40px;
  /* Aplica a animação ao ser criado */
  animation: dropIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.27) forwards;
}

.pin-sub .material-symbols-outlined {
  font-size: 36px;
  /* Sombra branca para destacar do mapa de satélite */
  text-shadow: 0 0 3px rgba(255,255,255,0.8), 0 2px 5px rgba(0,0,0,0.5);
  transition: transform 0.2s ease, color 0.2s ease;
}

/* Efeito Hover no Pino */
.pin-sub:hover .material-symbols-outlined {
  transform: scale(1.3) translateY(-5px);
  z-index: 1000;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); /* Brilho dourado */
}

/* Estilo da Janela de Informação (InfoWindow) */
.gm-style-iw-c {
  padding: 12px !important;
  border-radius: 8px !important;
}

.info-window-title {
  font-family: 'Segoe UI', sans-serif;
  font-size: 14px;
  font-weight: bold;
  color: #333;
  margin: 0;
}

/* ======================================================== */
/*   CARTÃO FLUTUANTE TURÍSTICO (ESTILO GOOGLE MAPS)        */
/* ======================================================== */

.tour-card {
  position: absolute;
  left: 20px;
  top: 80px;
  width: 400px;
  max-height: calc(90vh - 110px);
  background: #fff;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgb(0, 0, 0);
  overflow: hidden;
  z-index: 4000;
  display: none;
}

.tour-card .close-card {
  position: absolute;
  top: 14px;
  right: 14px;
  width: 36px;
  height: 36px;
  font-size: 20px;
  background: rgba(255,255,255,0.95);
  border: none;
  border-radius: 50%;
  color: #5f6368;
  cursor: pointer;
  z-index: 30;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  transition: background 0.2s;
}

.tour-card .close-card:hover {
  background: #fff;
}

/* --- IMAGENS / CAROUSEL --- */
.tour-card .media {
  position: relative;
  width: 100%;
  height: 280px;
  overflow: hidden;
  background: #e8eaed;
}

.tour-card .media img {
  width: 100%;
  height: 280px;
  object-fit: cover;
  transition: transform .3s ease;
}

/* Ícones superior esquerdo/direito */
.tour-card .icon-top {
  position: absolute;
  top: 14px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(255,255,255,0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  cursor: pointer;
  z-index: 20;
  transition: background 0.2s;
}
.tour-card .icon-top:hover {
  background: #fff;
}
.tour-card .icon-top.left { left: 14px; }
.tour-card .icon-top.right { right: 60px; }
.tour-card .icon-top .material-symbols-outlined {
  color: #5f6368;
  font-size: 20px;
}

/* Setas */
.tour-card .arrow {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: rgba(255,255,255,0.95);
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  cursor: pointer;
  z-index: 20;
  transition: background 0.2s;
}
.tour-card .arrow:hover {
  background: #fff;
}
.tour-card .arrow.left { left: 14px; }
.tour-card .arrow.right { right: 14px; }
.tour-card .arrow .material-symbols-outlined {
  color: #5f6368;
  font-size: 22px;
}

/* Overlay de categoria na imagem */
.tour-card .media::after {
  position: absolute;
  bottom: 16px;
  left: 16px;
  background: rgba(0,0,0,0.7);
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  z-index: 10;
}

/* --- CONTEÚDO --- */
.tour-card .content {
  padding: 20px;
  overflow-y: auto;
  max-height: calc(100vh - 380px);
}

.tour-card .title {
  font-size: 22px;
  font-weight: 600;
  color: #202124;
  line-height: 1.3;
  margin-bottom: 4px;
}

.tour-card .address {
  display: flex;
  align-items: center;
  gap: 6px;
  margin-top: 8px;
  color: #70757a;
  font-size: 14px;
}

.tour-card .address::before {
  font-size: 16px;
}

/* Rating - Adicione esta estrutura ao HTML se necessário */
.tour-card .rating {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

.tour-card .rating-stars {
  color: #fbbc04;
  font-size: 16px;
}

.tour-card .rating-number {
  font-weight: 600;
  color: #202124;
  font-size: 14px;
}

.tour-card .rating-count {
  color: #70757a;
  font-size: 14px;
}

.tour-card .excerpt {
  margin-top: 16px;
  color: #3c4043;
  font-size: 14px;
  line-height: 1.6;
}

.info-row {
  display: flex;
  align-items: flex-start;
  margin-top: 16px;
  padding: 12px 0;
  border-top: 1px solid #e8eaed;
}

.info-row .icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.info-row .icon .material-symbols-outlined {
  color: #5f6368;
  font-size: 20px;
}

.info-row .text {
  margin-left: 12px;
  font-size: 14px;
  color: #3c4043;
  line-height: 1.5;
}

.meta-source {
  text-align: center;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid #e8eaed;
  font-size: 12px;
  color: #70757a;
}

/* RESPONSIVO */
@media (max-width: 900px) {
  .tour-card {
    width: calc(100% - 40px);
    left: 20px;
    top: 70px;
  }
}

/* AJUSTES NOS CONTROLES DO MAPA */
.map-controls {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 5; /* Acima do mapa */
}

.control-group {
  display: flex;
  background: white;
  padding: 5px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  gap: 5px;
}

/* Botões Gerais do Mapa */
.map-controls button {
  border: none;
  background-color: transparent;
  padding: 6px 12px;
  font-size: 13px;
  font-weight: 600;
  color: #6A5A4D; /* Sua cor brand-color */
  cursor: pointer;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.map-controls button:hover {
  background-color: #f0f0f0;
  color: #964B00;
}

.map-controls button.active {
  background-color: #6A5A4D;
  color: #FFFFFF; /* Texto branco no ativo */
}

.map-controls button.active .material-symbols-outlined {
  color: #FFFFFF;
}

/* Ícones dentro dos botões */
.map-controls .material-symbols-outlined {
  font-size: 20px;
  color: inherit;
}

/* PAINEL DE INFORMAÇÕES DA ROTA */
.route-panel {
  position: absolute;
  top: 10px;
  right: 60px; /* Um pouco afastado da direita */
  width: 250px;
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 10;
  border: 1px solid gold;
  font-family: 'Segoe UI', sans-serif;
}

.route-panel h4 {
  margin: 0 0 10px 0;
  color: #964B00;
  font-size: 14px;
}

.route-panel p {
  margin: 5px 0;
  font-size: 13px;
  color: #333;
}

.btn-small {
  margin-top: 10px;
  padding: 5px 10px;
  font-size: 11px;
  background-color: #6A5A4D;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  width: 100%;
}

.btn-small.btn-danger {
  background-color: #d32f2f;
  margin-top: 5px;
}

/* Utilitário */
.hidden {
  display: none !important;
}

.hidden { display: none !important; }
#routes-panel h3 { margin-top: 0; font-size: 16px; }
#routes-panel ul li { padding: 4px 0; font-size: 14px; border-bottom: 1px solid #eee; }
#routes-panel button { padding: 5px 8px; cursor: pointer; }

/* ============================================================
   MAPS.CSS - VERSÃO 2.0 FINAL (COM IA E MARCADORES)
   ============================================================ */

/* ===== VARIÁVEIS DE COR E FONTES ===== */
:root {
  --background-color: #FFFFFF;
  --panel-background: #FFFFFF;
  --text-color-primary: #5C5C5C;
  --text-color-secondary: #AEAEAE;
  --border-color: gold;
  --brand-color: #6A5A4D;        /* Marrom Petriter */
  --brand-hover: #aa8b69;        /* Bege Hover */
  --ai-color: #6A0DAD;           /* Roxo da IA */
  --font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
  
  /* Cores das Rotas Sugeridas */
  --route-1-color: #E63946; /* Vermelho */
  --route-2-color: #2A9D8F; /* Verde Água */
  --route-3-color: #F4A261; /* Laranja */
}

/* ===== RESET E ESTILOS GLOBAIS ===== */
* { box-sizing: border-box; }

body, html {
  margin: 0; padding: 0;
  height: 100vh; width: 100vw;
  font-family: var(--font-family);
  background-color: var(--background-color);
  overflow: hidden;
  color: var(--text-color-primary);
}

/* Utilitário para esconder elementos */
.hidden { display: none !important; }

/* Ícones Google */
.material-symbols-outlined {
  font-variation-settings: 'FILL' 0, 'wght' 300, 'GRAD' 0, 'opsz' 24;
  font-size: 22px;
}

/* ============================================================
   1. HEADER / NAVBAR
   ============================================================ */
.header {
  display: flex;
  align-items: center;
  gap: 24px;
  padding: 0 24px;
  height: 60px;
  width: 100%;
  border-bottom: 0.5px solid var(--border-color);
  background-color: var(--background-color);
  z-index: 2000;
  position: relative;
}

.logo-container { flex-shrink: 0; }
.header .logo-image { width: 45px; }

.nav-menu {
  display: flex;
  gap: 30px;
  margin-right: auto;
}

.nav-menu a, .nav-menu button {
  text-decoration: none;
  color: #964B00;
  font-size: 14px;
  font-weight: 500;
  background: none;
  border: none;
  cursor: pointer;
  transition: color 0.2s ease;
  font-family: var(--font-family);
}

.nav-menu a:hover, .nav-menu button:hover { color: var(--brand-hover); }

.nav-right {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-shrink: 0;
}

.search-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  padding: 6px 12px;
  background-color: var(--background-color);
}
.search-bar input {
  border: none; outline: none; background: transparent;
  font-size: 14px; width: 150px;
}

.user-actions { display: flex; gap: 12px; }
.action-icon {
  color: var(--brand-color);
  text-decoration: none;
  display: flex; align-items: center; justify-content: center;
}
.action-icon:hover { color: gold; }

/* ============================================================
   2. LAYOUT PRINCIPAL (MAPA + SIDEBAR)
   ============================================================ */
.main-content {
  display: flex;
  height: calc(100vh - 60px);
}

#map-container {
  flex-grow: 1;
  position: relative;
}

#map { width: 100%; height: 100%; background: #e5e3df; }

/* Sidebar Direita (Filtros Vazio) */
.info-panel {
  width: 350px; /* Reduzi um pouco para dar espaço ao mapa */
  flex-shrink: 0;
  border-left: 1px solid var(--border-color);
  background-color: var(--panel-background);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  z-index: 1000;
}

.empty-state { text-align: center; color: var(--text-color-secondary); }
.empty-state-icon { font-size: 64px; margin-bottom: 12px; color: #ccc; }

/* ============================================================
   3. CONTROLES DO MAPA (Botões Flutuantes)
   ============================================================ */
.map-controls {
  position: absolute;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 15px;
  z-index: 5;
}

.control-group {
  display: flex;
  background: white;
  padding: 5px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  gap: 5px;
}

.map-controls button {
  border: none;
  background-color: transparent;
  padding: 8px 14px;
  font-size: 13px;
  font-weight: 600;
  color: var(--brand-color);
  cursor: pointer;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.map-controls button:hover { background-color: #f0f0f0; }

.map-controls button.active {
  background-color: var(--brand-color);
  color: white;
}
.map-controls button.active .material-symbols-outlined { color: white; }

/* BOTÃO ESPECIAL DA IA (Roxo) */
.ai-btn {
  color: var(--ai-color) !important;
}
.ai-btn:hover {
  background-color: #f3e5f5 !important;
}
.ai-btn .material-symbols-outlined {
  font-variation-settings: 'FILL' 1; /* Ícone preenchido */
}

/* ============================================================
   4. MODAL "PETRITER AI" (NOVO - VERSÃO 2.0)
   ============================================================ */
.ai-modal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 1000px; /* Mais largo para caber 3 colunas */
  height: 85vh;
  background: white;
  border-radius: 12px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.5);
  z-index: 5000;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  border: 2px solid var(--border-color);
  animation: modalFadeIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
}

@keyframes modalFadeIn {
  from { opacity: 0; transform: translate(-50%, -40%) scale(0.9); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

.ai-header {
  padding: 15px 24px;
  background: #fdfdfd;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ai-header h3 {
  margin: 0;
  font-size: 20px;
  color: var(--ai-color);
  display: flex;
  align-items: center;
  gap: 10px;
}

.close-btn {
  background: none; border: none; font-size: 24px; cursor: pointer; color: #999;
}
.close-btn:hover { color: #d32f2f; }

.ai-content {
  padding: 24px;
  overflow-y: auto;
  background-color: #f8f9fa;
  flex: 1;
}

.ai-intro { font-size: 16px; color: #555; margin-bottom: 24px; text-align: center; }
.ai-intro strong { color: var(--ai-color); }

/* GRID DE ROTAS */
.routes-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  align-items: start;
}

.route-card {
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border: 1px solid #eee;
  transition: transform 0.2s;
  height: 100%;
}

.route-card:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.1); }

/* Cabeçalhos Coloridos dos Cards */
.route-header {
  padding: 16px;
  color: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
/* O JS define a cor inline, mas aqui ficam os fallbacks */
#route-card-1 .route-header { background: linear-gradient(135deg, var(--route-1-color), #c0392b); }
#route-card-2 .route-header { background: linear-gradient(135deg, var(--route-2-color), #16a085); }
#route-card-3 .route-header { background: linear-gradient(135deg, var(--route-3-color), #d35400); }

.route-header h4 { margin: 0; font-size: 16px; font-weight: 700; }
.badge {
  background: rgba(255,255,255,0.25);
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Lista de Paradas */
.route-stops {
  list-style: none;
  padding: 0;
  margin: 0;
  flex: 1; /* Ocupa espaço disponível para alinhar botões no final */
}

.route-stops li {
  padding: 12px 16px;
  border-bottom: 1px solid #f0f0f0;
  font-size: 14px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}
.route-stops li:last-child { border-bottom: none; }
.route-stops li div { flex: 1; }

.add-single-btn {
  background: white;
  border: 1px solid #ddd;
  color: #2e7d32;
  border-radius: 50%;
  width: 28px; height: 28px;
  font-size: 18px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
}
.add-single-btn:hover { background: #e8f5e9; border-color: #2e7d32; transform: scale(1.1); }

/* Rodapé do Card */
.route-actions {
  padding: 16px;
  background: #fafafa;
  border-top: 1px solid #eee;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.btn-visualize {
  background: #fff;
  border: 1px solid #ccc;
  color: #333;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s;
}
.btn-visualize:hover { background: #eee; }

.btn-add-all {
  background: var(--brand-color);
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s;
}
.btn-add-all:hover { background: gold; color: #3e2723; }


/* ============================================================
   5. MARCADORES PERSONALIZADOS (BOLINHAS NUMERADAS)
   ============================================================ */
.ai-marker-pin {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background-color: var(--ai-color); /* Cor padrão */
  color: #FFFFFF;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Segoe UI', sans-serif;
  font-weight: bold;
  font-size: 14px;
  border: 2px solid #FFFFFF;
  box-shadow: 0 3px 6px rgba(0,0,0,0.4);
  cursor: pointer;
  
  /* Animação de entrada */
  animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  transition: transform 0.2s ease, background-color 0.2s;
}

/* Cores específicas baseadas na rota selecionada */
.route-type-1 { background-color: var(--route-1-color); }
.route-type-2 { background-color: var(--route-2-color); }
.route-type-3 { background-color: var(--route-3-color); }

.ai-marker-pin:hover {
  transform: scale(1.3);
  background-color: gold; /* Destaque ao passar o mouse */
  color: #3e2723;
  z-index: 9999;
  border-color: #3e2723;
}

@keyframes popIn {
  from { transform: scale(0); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

/* ============================================================
   6. OUTROS ELEMENTOS (Tour Card, Filtros, etc)
   ============================================================ */

/* Tour Card (Pequenas correções para garantir que fique acima do mapa) */
.tour-card {
  z-index: 4000;
  border: 1px solid var(--border-color);
  /* Mantenha seus estilos originais do tour card aqui se quiser personalizar mais */
}

/* Painel de Informações da Rota Manual (Canto Superior Direito) */
.route-panel {
  position: absolute;
  top: 10px;
  right: 60px;
  width: 260px;
  background: white;
  padding: 16px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  z-index: 10;
  border: 1px solid var(--border-color);
}
.route-panel h4 { margin: 0 0 10px 0; color: var(--brand-color); font-size: 14px; }
.route-panel p { margin: 5px 0; font-size: 13px; color: #333; }
.btn-small {
  width: 100%; margin-top: 8px; padding: 6px;
  font-size: 12px; background: var(--brand-color); color: white;
  border: none; border-radius: 4px; cursor: pointer;
}
.btn-small.btn-danger { background: #d32f2f; margin-top: 5px; }


/* DROPDOWN DE FILTROS (Mantido do original) */
.filter-dropdown {
  position: absolute;
  top: 61px;
  left: 350px;
  width: 300px;
  max-height: 80vh;
  background-color: white;
  border: 1px solid var(--border-color);
  border-top: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  z-index: 3000;
  display: flex;
  flex-direction: column;
  border-radius: 0 0 8px 8px;
}

.dropdown-header { padding: 12px 16px; background: #fafafa; border-bottom: 1px solid #eee; display:flex; justify-content:space-between; }
.dropdown-content { padding: 10px; overflow-y: auto; }
.dropdown-footer { padding: 10px; border-top: 1px solid #eee; }
.btn-primary { width: 100%; padding: 8px; background: var(--brand-color); color: white; border: none; border-radius: 4px; cursor: pointer; }

/* Árvore de Checkboxes */
ul.tree-list { padding-left: 0; list-style: none; }
ul.tree-list ul { padding-left: 20px; border-left: 1px solid #eee; margin-left: 5px; }
.item-filtro { margin-bottom: 5px; }
.label-distrito { font-weight: bold; color: #964B00; }

/* Marcadores de Sub-bairros (Estilo antigo "Pin" - mantido para compatibilidade) */
.pin-sub {
  position: absolute;
  cursor: pointer;
  width: 40px; height: 40px;
  display: flex; justify-content: center; align-items: center;
  animation: dropIn 0.5s;
}
.pin-sub .material-symbols-outlined {
  font-size: 36px;
  text-shadow: 0 2px 5px rgba(0,0,0,0.5);
  color: #964B00;
  transition: transform 0.2s;
}
.pin-sub:hover .material-symbols-outlined { transform: scale(1.3) translateY(-5px); color: gold; }

@keyframes dropIn {
  0% { opacity: 0; transform: translate(-50%, -200%); }
  100% { opacity: 1; transform: translate(-50%, -100%); }
}